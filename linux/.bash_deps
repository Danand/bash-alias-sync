#!/bin/bash

function __try_install_via_apt() {
    apt -qq list "$1" 2>/dev/null \
    | grep -q "installed" \
    || sudo apt install -y "$1" \
    || true
  }

function __try_install_via_apk() {
    apk add --update "$1"
}

_package_manager="$(detect-package-manager)"

if [ "${_package_manager}" == "apt" ]; then
  __try_install_via_apt "net-tools"
  __try_install_via_apt "xclip"
  __try_install_via_apt "ripgrep"
  __try_install_via_apt "fzf"
  __try_install_via_apt "jq"

  unset -f __try_install_via_apt
elif [ "${_package_manager}" == "apk" ]; then
  __try_install_via_apk "net-tools"
  __try_install_via_apk "xclip"
  __try_install_via_apk "ripgrep"
  __try_install_via_apk "fzf"
  __try_install_via_apk "jq"

  unset -f __try_install_via_apk
fi
